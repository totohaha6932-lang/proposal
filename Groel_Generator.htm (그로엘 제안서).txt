<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 뷰포트 설정: 모바일/PC 호환성 유지 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Groel Universal Proposal Generator v19 (Final Polish)</title>
    
    <!-- 폰트 로드 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    
    <!-- PDF 엔진 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        /* 1. Reset & Typography */
        * { box-sizing: border-box; }
        body {
            background-color: #1a1a1a;
            margin: 0;
            padding: 0;
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            -webkit-font-smoothing: antialiased;
        }

        /* 2. Control Dashboard */
        .dashboard {
            width: 100%;
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 9999;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            max-height: 90vh;
            overflow-y: auto;
        }

        .dashboard-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            align-items: flex-end;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            flex: 1 1 200px; 
        }

        .input-group label {
            font-size: 12px;
            font-weight: 700;
            color: #bdc3c7;
            letter-spacing: -0.5px;
        }

        .input-group input {
            background: #34495e;
            border: 1px solid #4a6278;
            color: white;
            padding: 10px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
        }

        .input-group input:focus {
            outline: none;
            border-color: #e74c3c;
            background: #1e2b38;
        }

        .action-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-weight: 700;
            cursor: pointer;
            font-size: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: all 0.2s;
            flex: 1 1 100%;
            max-width: 300px;
        }

        .action-btn:active { transform: translateY(1px); }

        /* 3. Preview Area */
        .preview-wrapper {
            width: 100%;
            padding: 40px 0;
            background-color: #525659;
            display: flex;
            justify-content: center;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* 4. PDF Content Container */
        #pdf-content {
            width: 210mm;
            min-width: 210mm;
            max-width: 210mm;
            background-color: #fff;
            padding: 20mm; 
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            margin: 0 auto;
            height: auto;
            min-height: 297mm;
        }

        /* 5. Document Styles */
        .header-brand {
            font-size: 13px; color: #888; font-weight: 500; letter-spacing: 1px;
            border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 50px;
            display: flex; justify-content: space-between;
        }

        .header-title {
            font-size: 34px; font-weight: 800; margin-bottom: 60px; color: #111;
            line-height: 1.3; letter-spacing: -1px; word-break: keep-all; text-align: center;
        }

        .info-grid {
            display: grid; grid-template-columns: 80px 1fr; gap: 15px;
            margin-bottom: 60px; font-size: 16px; color: #333; line-height: 1.6;
            border-bottom: 1px solid #eee; padding-bottom: 30px;
        }
        .info-label { font-weight: 700; color: #000; }

        .content-block {
            margin-bottom: 40px;
            break-inside: avoid;
            page-break-inside: avoid;
        }

        .section-title {
            font-size: 20px; font-weight: 700; color: #2c3e50;
            margin-bottom: 18px; display: flex; align-items: center;
            letter-spacing: -0.5px;
            break-after: avoid;
        }
        .section-title::before {
            content: ''; display: inline-block; width: 6px; height: 6px;
            background-color: #e74c3c; margin-right: 12px; border-radius: 50%;
        }

        .content-text {
            font-size: 15px; 
            line-height: 1.7; 
            color: #333;
            margin-bottom: 12px; 
            text-align: left;
            word-break: keep-all;
            letter-spacing: -0.03em;
        }

        .highlight {
            font-weight: 700; color: #000; background: none; 
        }

        /* [핵심 수정] 테이블 디자인 완전체 (Perfect Balance) */
        .proposal-table {
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 25px; 
            font-size: 14.5px;
            break-inside: avoid; 
            page-break-inside: avoid;
            /* 상단과 하단을 테이블 자체 테두리로 고정하여 균형 맞춤 */
            border-top: 2px solid #111; 
            border-bottom: 2px solid #111; 
        }

        .proposal-table th {
            background-color: #fbfbfb;
            width: 24%; 
            font-weight: 700; 
            color: #111; 
            padding: 18px 15px; 
            text-align: left; 
            vertical-align: top;
            border-bottom: 1px solid #333; /* 헤더 구분선 */
            border-right: none; 
            border-left: none;
        }

        .proposal-table td {
            padding: 18px 15px; 
            text-align: left; 
            vertical-align: middle;
            line-height: 1.65; 
            letter-spacing: -0.02em;
            color: #444;
            border-bottom: 1px solid #eaeaea; /* 내용 구분선 (연하게) */
            border-right: none; 
            border-left: none;
        }

        /* 마지막 행의 셀은 밑줄을 없애고, 테이블 자체의 bottom-border(2px)가 보이게 함 */
        .proposal-table tr:last-child td { 
            border-bottom: none; 
        }

        .footer-section { 
            margin-top: 100px; text-align: right; 
            break-inside: avoid; page-break-inside: avoid;
        }
        .footer-name { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
        .footer-info { font-size: 14px; color: #666; font-family: 'Roboto', sans-serif; }

        .dynamic-text { 
            font-weight: inherit; color: inherit; border-bottom: none;
        }

        /* 로딩 화면 */
        #loading {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); color: white; z-index: 10000;
            flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
        }

        @media print {
            body { background: white; }
            .dashboard { display: none; }
            .preview-wrapper { padding: 0; width: 100%; }
            #pdf-content { box-shadow: none; margin: 0 auto; width: 210mm; padding: 20mm; }
        }
    </style>
</head>
<body>

    <div id="loading">
        <div style="font-size: 24px; font-weight: bold; margin-bottom: 10px;">PDF 저장 중...</div>
        <div style="font-size: 14px; opacity: 0.8;">화면을 최적화하고 있습니다.<br>잠시만 기다려주세요.</div>
    </div>

    <div class="dashboard">
        <div class="dashboard-inner">
            <div class="input-group">
                <label>업체명 (Target)</label>
                <input type="text" id="inName" value="(주)" oninput="sync()">
            </div>
            <div class="input-group">
                <label>수신 직함</label>
                <input type="text" id="inTo" value="영업/마케팅 담당자 귀하" oninput="sync()">
            </div>
            <div class="input-group" style="flex: 2;">
                <label>인사말 관찰 내용</label>
                <input type="text" id="inObs" value="의 제품들을 보며 제조사로서의 독보적인 경쟁력을 보았습니다." oninput="sync()">
            </div>
            <div class="input-group">
                <label>취급 분야</label>
                <input type="text" id="inCat" value="모든 제품" oninput="sync()">
            </div>
            <div class="input-group">
                <label>요청 역할</label>
                <input type="text" id="inRole" value="은 원활한 상품 공급과 출고만 신경 써주시면 됩니다." oninput="sync()">
            </div>
            <div class="input-group" style="flex: 2;">
                <label>수수료 기준</label>
                <input type="text" id="inComm" value="(셀러 수수료, 마케팅 운영비, 전반적인 제반 비용, VAT 별도 기준)" oninput="sync()">
            </div>
            <button class="action-btn" onclick="makePDF()">PDF 다운로드</button>
        </div>
    </div>

    <!-- Preview Area -->
    <div class="preview-wrapper">
        <div id="pdf-content">
            
            <div class="header-brand">
                <span>Groel Business Proposal</span>
                <span></span>
            </div>

            <div class="header-title">
                <span class="t-name">(주)</span><br>
                라이브 커머스 협업 제안서
            </div>

            <div class="info-grid content-block">
                <div class="info-label">TO.</div>
                <div><span class="t-name">(주)</span> <span id="outTo">영업/마케팅 담당자 귀하</span></div>
                
                <div class="info-label">FROM.</div>
                <div>Groel(그로엘) 대표 박찬국</div>
            </div>

            <!-- 1. 인사말 -->
            <div class="content-block">
                <div class="section-title">01. 인사말</div>
                <div class="content-text">
                    안녕하십니까, 라이브 커머스 전문 파트너 <span style="font-weight: 700;">Groel(그로엘)</span>의 대표 박찬국입니다.
                </div>
                <div class="content-text">
                    <span class="t-name">(주)</span><span id="outObs">의 제품들을 보며 제조사로서의 독보적인 경쟁력을 보았습니다.</span> 온라인 시장은 단순한 이미지와 텍스트를 넘어, 제품의 본질과 디테일을 생생하게 증명하는 <strong>'라이브 커머스'</strong>가 비즈니스의 핵심입니다.
                </div>
                <div class="content-text">
                    저희는 규모가 크진 않지만, 시장을 읽는 눈과 판매력을 갖춘 셀러들과 끈끈한 파트너십을 맺고 기민하게 움직이는 조직입니다. <span class="t-name">(주)</span>의 제품이 저희와 함께하는 셀러들을 만난다면, 브랜드 가치 제고는 물론 실질적인 매출 성장으로 이어질 것이라 확신합니다.
                </div>
            </div>

            <!-- 2. 진행 방향 (테이블 디자인: 최하단 2px 자동 적용) -->
            <div class="content-block">
                <div class="section-title">02. 진행 방향</div>
                <div class="content-text">
                    저희는 단순한 판매 대행이 아닌, <span class="t-name">(주)</span>의 브랜드 가치를 보존하며 성과를 만드는 전략적 파트너십을 지향합니다.
                </div>
                
                <table class="proposal-table">
                    <tr>
                        <th>Seller Connection</th>
                        <td><span id="outCat">모든 제품</span> 분야에서 구매 전환율이 검증된 전문 셀러를 연결합니다.</td>
                    </tr>
                    <tr>
                        <th>Merchandising</th>
                        <td>단순 가격 할인이 아닌, 라이브 방송만의 특별한 세트 구성과 혜택을 기획하여 기존 온라인 판매가 이슈를 방지하고 구매 명분을 창출합니다.</td>
                    </tr>
                    <tr>
                        <th>Viral Marketing</th>
                        <td>방송 전후 셀러들의 SNS 채널을 통해 브랜드의 매력을 확산시켜 마케팅 시너지를 극대화합니다.</td>
                    </tr>
                </table>
            </div>

            <!-- 3. 제안 조건 -->
            <div class="content-block">
                <div class="section-title">03. 제안 조건</div>
                <div class="content-text">
                    초기 비용 리스크(Risk)를 제거하고, 성과 발생 시에만 수익을 공유하는 <strong>100% 성과 기반(Performance-based)</strong>의 합리적인 모델을 제안합니다.
                </div>
            </div>

            <!-- 4. 세부 제안 내용 (테이블 디자인: 최하단 2px 자동 적용) -->
            <div class="content-block" style="margin-top: 40px;">
                <div class="section-title">세부 제안 내용</div>
                
                <table class="proposal-table">
                    <tr>
                        <th>계약 형태</th>
                        <td>
                            <strong>위탁 판매 및 라이브 커머스 대행</strong><br>
                            <span style="font-size: 0.9em; color: #666;">(판매 발생 시에만 수수료 부과 / 초기 착수금 없음)</span>
                        </td>
                    </tr>
                    <tr>
                        <th>수수료율</th>
                        <td>
                            <strong>별도 협의</strong><br>
                            상품 카테고리 및 매칭 셀러에 따라 최적의 요율 산정<br>
                            <span id="outComm">(셀러 수수료, 마케팅 운영비, 전반적인 제반 비용, VAT 별도 기준)</span>
                        </td>
                    </tr>
                    <tr>
                        <th>정산 방식</th>
                        <td>
                            방송 종료 후 주문 확정 건에 한해 정산<br>
                            (플랫폼별 정산 주기에 따라 즉시 혹은 1일에서 1주일 소요)<br>
                            <span style="font-size: 0.9em; color: #555; font-weight: 600;">*방송에 필요한 최소한의 샘플 제공 비용은 제외*</span>
                        </td>
                    </tr>
                    <tr>
                        <th>역할 분담</th>
                        <td>
                            [Groel] 방송 기획, 송출, 마케팅, 대부분의 판매 전반을 수행 합니다.<br>
                            <strong>[<span class="t-name">(주)</span>] <span id="outRole">은 원활한 상품 공급과 출고만 신경 써주시면 됩니다.</span></strong>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- 5. 맺음말 -->
            <div class="content-block">
                <div class="section-title" style="margin-top: 50px;">04. 맺음말</div>
                <div class="content-text">
                    저희는 단순히 물건을 파는 대행사가 아닙니다. <span class="t-name">(주)</span>이라는 브랜드와 함께 시장을 개척하고 성장하는 파트너가 되고 싶습니다.
                </div>
                <div class="content-text">
                    미팅 기회를 주신다면, <span class="t-name">(주)</span>의 라인업 중 어떤 아이템을 주력으로 내세워 시장을 공략할지 구체적인 전략을 함께 논의하고 싶습니다.
                </div>
                <div class="content-text">
                    긍정적인 검토 부탁드립니다.<br>
                    귀사의 무궁한 발전을 기원합니다.
                </div>
            </div>

            <!-- Footer -->
            <div class="footer-section">
                <div class="footer-name">Groel 대표 박찬국</div>
                <div class="footer-info">
                    M. 010-4893-6885 / 010-2296-7575<br>
                    E. grow567@naver.com
                </div>
            </div>

        </div>
    </div>

    <script>
        function sync() {
            const inputs = {
                name: document.getElementById('inName').value,
                to: document.getElementById('inTo').value,
                obs: document.getElementById('inObs').value,
                cat: document.getElementById('inCat').value,
                role: document.getElementById('inRole').value,
                comm: document.getElementById('inComm').value
            };

            document.querySelectorAll('.t-name').forEach(el => el.innerText = inputs.name);
            document.getElementById('outTo').innerText = inputs.to;
            document.getElementById('outObs').innerText = inputs.obs;
            document.getElementById('outCat').innerText = inputs.cat;
            document.getElementById('outRole').innerText = inputs.role;
            document.getElementById('outComm').innerText = inputs.comm;
        }

        function makePDF() {
            if (typeof html2pdf === 'undefined') {
                alert('네트워크 상태를 확인해주세요. PDF 엔진을 불러오지 못했습니다.');
                return;
            }

            const loader = document.getElementById('loading');
            loader.style.display = 'flex';

            const targetName = document.getElementById('inName').value.replace(/[^a-zA-Z0-9가-힣]/g, "") || "업체명";
            const element = document.getElementById('pdf-content');
            
            const opt = {
                margin:       0, 
                filename:     `Groel_협업제안서_${targetName}.pdf`,
                image:        { type: 'jpeg', quality: 1 },
                html2canvas:  { 
                    scale: 2, 
                    useCORS: true, 
                    letterRendering: true,
                    scrollY: 0
                },
                jsPDF:        { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait'
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };

            setTimeout(() => {
                html2pdf().set(opt).from(element).save()
                    .then(() => {
                        loader.style.display = 'none';
                    })
                    .catch((err) => {
                        console.error("PDF Error:", err);
                        alert("PDF 생성 중 오류가 발생했습니다. 브라우저를 새로고침 후 다시 시도해 주세요.");
                        loader.style.display = 'none';
                    });
            }, 500);
        }
    </script>
</body>
</html>